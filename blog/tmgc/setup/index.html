<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>セットアップ</title>
  <style>
    body { display: none; }
  </style>
  <link rel="stylesheet" href="../../../style.css">
  <script src="../../../loader.js"></script>
</head>
<body>
  <div class="container">

    <h1>セットアップ</h1>

    <div class="setup-section">
      <h2>前提</h2>
      <p><strong>Windows 10</strong>上で<strong>コントローラ操作</strong>することを想定しています。次のソフトを使用するのでインターネット上からダウンロードします。</p>
      <ul>
        <li>tmgc100+（ゲームソフト）</li>
        <li>dgVoodoo（エミュレータソフト）</li>
        <li>HidHide（コントローラ無効化ソフト）</li>
        <li>JoyToKey（キー割り当てソフト）</li>
        <li>YAMAHA XG WDM SoftSynthesizer（サウンド再生ソフト）</li>
      </ul>
      以下，ゲームを除く各ソフトについて補足します。
    </div>

    <div class="setup-section">
      <h2>2. インストール手順</h2>
      <ol>
        <li>
          <strong>リポジトリをクローンする</strong>
          <div class="code-block">git clone https://github.com/chk24851/tortelmagic.git<br>cd tortelmagic</div>
        </li>
        <li>
          <strong>依存パッケージをインストール</strong>
          <div class="code-block">pip install -r requirements.txt</div>
          <div class="note">
            <strong>注意</strong>: pipコマンドが利用できない場合は、Pythonパッケージマネージャー（pip3）を使用してください。
          </div>
        </li>
        <li>
          <strong>設定ファイルを作成</strong>
          <div class="code-block">cp config.example.json config.json</div>
          <p>必要に応じて<code>config.json</code>ファイルを編集してください。</p>
        </li>
      </ol>
    </div>

    <div class="setup-section">
      <h2>3. 初期設定</h2>
      <ol>
        <li>
          <strong>データベースの初期化</strong>
          <div class="code-block">python setup.py init-db</div>
        </li>
        <li>
          <strong>デフォルトデータの読み込み</strong>
          <div class="code-block">python manage.py migrate<br>python manage.py seed</div>
        </li>
        <li>
          <strong>環境変数の設定</strong>
          <p><code>.env</code>ファイルを作成し、必要な環境変数を設定します。</p>
          <div class="code-block">API_KEY=your_api_key<br>DEBUG=True<br>ENVIRONMENT=development</div>
        </li>
      </ol>
    </div>

    <div class="setup-section">
      <h2>4. アプリケーションの起動</h2>
      <ol>
        <li>
          <strong>開発サーバーの起動</strong>
          <div class="code-block">python manage.py runserver</div>
          <p>ブラウザで<code>http://localhost:8000</code>にアクセスしてください。</p>
        </li>
        <li>
          <strong>本番環境での実行</strong>
          <div class="code-block">python manage.py runserver --env production</div>
        </li>
      </ol>
    </div>

    <div class="setup-section">
      <h2>5. テストの実行</h2>
      <p>アプリケーションが正しくセットアップされたか確認するため、テストを実行します。</p>
      <div class="code-block">python -m pytest tests/<br>python -m pytest tests/ -v</div>
      <p><strong>-v</strong>フラグを使用すると、詳細な出力が表示されます。</p>
    </div>

    <div class="setup-section">
      <h2>6. よくある問題と解決方法</h2>
      <dl>
        <dt><strong>問題: Pythonが見つからない</strong></dt>
        <dd>
          Pythonがシステムパスに含まれていない可能性があります。
          <div class="code-block">python --version</div>
          を実行して、インストール状態を確認してください。
        </dd>

        <dt><strong>問題: 依存パッケージのインストール失敗</strong></dt>
        <dd>
          <div class="code-block">pip install --upgrade pip setuptools wheel<br>pip install -r requirements.txt</div>
          を実行して、pipを最新バージョンに更新してから再試行してください。
        </dd>

        <dt><strong>問題: ポート8000が既に使用されている</strong></dt>
        <dd>
          <div class="code-block">python manage.py runserver 8001</div>
          別のポート番号を指定して実行してください。
        </dd>

        <dt><strong>問題: データベースエラーが発生する</strong></dt>
        <dd>
          <div class="code-block">python manage.py migrate --reset<br>python manage.py seed</div>
          データベースをリセットして再初期化してください。
        </dd>
      </dl>
    </div>

    <div class="setup-section">
      <h2>7. 次のステップ</h2>
      <ul>
        <li><a href="https://github.com/chk24851/tortelmagic" target="_blank" style="color: #d97037; text-decoration: underline;">GitHubリポジトリ</a>を確認して、最新の情報を取得します。</li>
        <li><a href="../" style="color: #d97037; text-decoration: underline;">トルテルマジックのメインページ</a>で、ゲーム情報を確認します。</li>
        <li>API仕様やプラグイン開発に関する詳細は、ドキュメントを参照してください。</li>
      </ul>
    </div>
  </div>
</body>
</html>
